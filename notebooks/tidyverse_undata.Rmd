---
title: "tidyverse_undata"
author: "PS"
date: "2023-11-18"
output: html_document
---
In this notebook we will explore UNdata using tidyverse libraries
```{r}
library(tidyverse)
```

read the csv file gdp
```{r}
gdp_df <- read_csv('../data/gdp_per_capita.csv',col_select = c('Country or Area', Year, Value))

```
```{r}
gdp_df <- gdp_df |>
  rename(Country = `Country or Area`, Year = `Year`, GDP_Per_Capita = 'Value')
```

Dropped the column Value_Footnotes and rename the columns

3. Which years are represented in this dataset? How many observations are there per year? Make a plot
to view the number of observations per year.


```{r}
gdp_df |>
  distinct(Year)
```
A total of 31 years from the year 1990 to 2020 are reprensented in the dataset.


```{r}
gdp_df |>
  ggplot(aes(x=Year)) +
  geom_bar()
```
4. How many countries are represented in this dataset? Which countries have the fewest observations?

```{r}
gdp_df |>
  summarize(num_countries = n_distinct(Country))
```

A total of 242 countries are represented in this dataset

```{r}
gdp_df %>%
  group_by(Country) %>%
  summarize(count = n()) %>%
  arrange(count) %>%
  head(5)

```

The above listed countries have the fewest observations 

5. Create a new dataframe by subsetting gdp_df to just the year 2014. Call this new dataframe gdp_2014.

```{r}
gdp_2014 <- gdp_df |>
  filter(Year == 2014)
```

6. Use .describe() to find the summary statistics for GDP per capita in 2014.

```{r}
gdp_2014 |>
  summary(GDP_Per_Capita)
```
7. Histogram for GDP per capita numbers for the year 2014

```{r}
gdp_2014 |>
  ggplot(aes(x=GDP_Per_Capita)) +
  geom_histogram(binwidth = 1000) +
  theme(axis.text.x = element_text(size = 12),   # Adjust X-axis label font size
        axis.text.y = element_text(size = 12),   # Adjust Y-axis label font size
        axis.title = element_text(size = 14))  

```
8. Find the top 5 counties and bottom 5 countries by GDP per capita in 2014.

TOP 5 countries by GDP
```{r}
gdp_2014 %>%
  arrange(desc(GDP_Per_Capita)) |>
  head(5)
```

Bottom 5 countries by GDP
```{r}
gdp_2014 %>%
  arrange(GDP_Per_Capita) |>
  head(5)
```
Q(9).
Now, return to the full dataset, gdp_df. Pivot the data for 1990 and 2018 (using the pandas
.pivot_wider() method or another method) so that each row corresponds to a country, each column
corresponds to a year, and the values in the table give the GDP_Per_Capita amount. Drop any rows
that are missing values for either 1990 or 2018. Save the result to a dataframe named gdp_pivoted.


```{r}
gdp_df_pivoted <- gdp_df |>
  filter(Year == 1990 | Year == 2018) |>
  pivot_wider(names_from = Year,
              values_from = GDP_Per_Capita)
```


```{r}
gdp_pivoted <- gdp_df_pivoted|>
              drop_na('2018', '1990')
```


